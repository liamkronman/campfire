{"ast":null,"code":"import _slicedToArray from\"/Users/liamkronman/Documents/GitHub/campfire/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React,{useRef,useEffect}from'react';import campfireBackground from'./assets/campfire-background-mac.png';import thefire1 from'./assets/thefire.png';import thefire2 from'./assets/thefire_2.png';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),inputValue=_React$useState2[0],setInputValue=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),showInstruct=_React$useState4[0],setShowInstruct=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),inFire=_React$useState6[0],setInFire=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),socket=_React$useState8[0],setSocket=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),currMessageAuthor=_React$useState10[0],setCurrMessageAuthor=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),currMessage=_React$useState12[0],setCurrMessage=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),campName=_React$useState14[0],setCampName=_React$useState14[1];var _React$useState15=React.useState(1),_React$useState16=_slicedToArray(_React$useState15,2),frameNum=_React$useState16[0],setFrameNum=_React$useState16[1];var _React$useState17=React.useState(thefire1),_React$useState18=_slicedToArray(_React$useState17,2),currFire=_React$useState18[0],setCurrFire=_React$useState18[1];var _React$useState19=React.useState(null),_React$useState20=_slicedToArray(_React$useState19,2),timeWhenLastUpdate=_React$useState20[0],setTimeWhenLastUpdate=_React$useState20[1];var _React$useState21=React.useState(null),_React$useState22=_slicedToArray(_React$useState21,2),timeSinceLastUpdate=_React$useState22[0],setTimeSinceLastUpdate=_React$useState22[1];var requestRef=React.useRef();var handleInputChange=function handleInputChange(event){if(event.target.value.length>0){setShowInstruct(true);}else{setShowInstruct(false);}setInputValue(event.target.value);};var handleKeyDown=function handleKeyDown(event){if(event.key==='Enter'){setCampName(inputValue);setInFire(true);var newSocket=io(\"http://localhost:3000\");setSocket(newSocket);}};var handleTyping=function handleTyping(event){socket.emit('message',\"\".concat(campName,\":\").concat(event.key));};useEffect(function(){if(socket){socket.on('message',function(message){setCurrMessage(message.value);setCurrMessageAuthor(message.user);});socket.on('deleteMessage',function(message){if(message.value===currMessage){setCurrMessage(\"\");setCurrMessageAuthor(\"\");}});}});var animate=function animate(startTime){if(!timeWhenLastUpdate)setTimeWhenLastUpdate(startTime);setTimeSinceLastUpdate(startTime-timeWhenLastUpdate);if(timeSinceLastUpdate>4000){console.log('happening');setTimeWhenLastUpdate(startTime);if(frameNum>=2){setFrameNum(1);}else{setFrameNum(frameNum+1);}if(frameNum===1){setCurrFire(thefire1);}else{setCurrFire(thefire2);}}requestAnimationFrame(animate);};// useEffect(() => {\n//     requestRef.current = requestAnimationFrame(animate);\n//     return () => cancelAnimationFrame(requestRef.current);\n// }, []);\nreturn/*#__PURE__*/_jsx(_Fragment,{children:inFire?/*#__PURE__*/_jsx(\"div\",{className:\"App\",style:{backgroundImage:\"url(\".concat(campfireBackground,\")\"),backgroundSize:'cover'},tabIndex:\"0\",onKeyPress:handleTyping,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"campfire-welcome-title\",children:[\"Welcome\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:30},children:\" \"}),\"to\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:30},children:\" \"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#F35B22\",fontFamily:\"'Space Mono', monospace\",fontSize:'60px'},children:[\"The\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:25},children:\" \"}),\"Campfire\"]})]}),currMessage?/*#__PURE__*/_jsxs(\"div\",{className:\"campfire-message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-author\",children:currMessageAuthor}),\":\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:25},children:\" \"}),currMessage]}):/*#__PURE__*/_jsx(\"div\",{className:\"campfire-message\",children:\" \"}),/*#__PURE__*/_jsx(\"img\",{src:currFire,className:\"the-fire\"}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:\"A Liam Kronman + Jason Seo Production\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"App\",style:{backgroundImage:\"url(\".concat(campfireBackground,\")\"),backgroundSize:'cover'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"campfire-title\",children:[\"The\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:25},children:\" \"}),\"Campfire\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"campfire-subtitle\",children:\"Type like you talk.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"campname-input\",type:\"text\",value:inputValue,placeholder:\"Enter a camp name...\",onChange:handleInputChange,onKeyDown:handleKeyDown}),showInstruct?/*#__PURE__*/_jsx(\"div\",{className:\"campfire-input-instruction\",children:\"Press enter to join the fire...\"}):null]}),/*#__PURE__*/_jsx(\"footer\",{className:\"footer\",children:\"A Liam Kronman + Jason Seo Production\"})]})})});}export default App;","map":{"version":3,"sources":["/Users/liamkronman/Documents/GitHub/campfire/app/src/App.js"],"names":["React","useRef","useEffect","campfireBackground","thefire1","thefire2","io","App","useState","inputValue","setInputValue","showInstruct","setShowInstruct","inFire","setInFire","socket","setSocket","currMessageAuthor","setCurrMessageAuthor","currMessage","setCurrMessage","campName","setCampName","frameNum","setFrameNum","currFire","setCurrFire","timeWhenLastUpdate","setTimeWhenLastUpdate","timeSinceLastUpdate","setTimeSinceLastUpdate","requestRef","handleInputChange","event","target","value","length","handleKeyDown","key","newSocket","handleTyping","emit","on","message","user","animate","startTime","console","log","requestAnimationFrame","backgroundImage","backgroundSize","fontSize","color","fontFamily"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { useRef, useEffect } from 'react';\nimport campfireBackground from './assets/campfire-background-mac.png';\nimport thefire1 from './assets/thefire.png';\nimport thefire2 from './assets/thefire_2.png';\nimport io from 'socket.io-client';\n\nfunction App() {\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const [showInstruct, setShowInstruct] = React.useState(false);\n  const [inFire, setInFire] = React.useState(false);\n  const [socket, setSocket] = React.useState(null);\n  const [currMessageAuthor, setCurrMessageAuthor] = React.useState(\"\");\n  const [currMessage, setCurrMessage] = React.useState(\"\");\n  const [campName, setCampName] = React.useState(null);\n  const [frameNum, setFrameNum] = React.useState(1);\n  const [currFire, setCurrFire] = React.useState(thefire1);\n  const [timeWhenLastUpdate, setTimeWhenLastUpdate] = React.useState(null);\n  const [timeSinceLastUpdate, setTimeSinceLastUpdate] = React.useState(null);\n  const requestRef = React.useRef();\n\n  const handleInputChange = (event) => {\n    if (event.target.value.length > 0) {\n      setShowInstruct(true);\n    } else {\n      setShowInstruct(false);\n    }\n    setInputValue(event.target.value);\n  }\n\n  const handleKeyDown = (event) => {\n    if (event.key === 'Enter') {\n      setCampName(inputValue);\n      setInFire(true)\n      const newSocket = io(`http://localhost:3000`);\n      setSocket(newSocket);\n    }\n  }\n\n  const handleTyping = (event) => {\n    socket.emit('message', `${campName}:${event.key}`);\n  }\n\n  useEffect(() => {\n    if (socket) {\n      socket.on('message', (message) => {\n        setCurrMessage(message.value)\n        setCurrMessageAuthor(message.user)\n      })\n      socket.on('deleteMessage', (message) => {\n        if (message.value === currMessage) {\n          setCurrMessage(\"\")\n          setCurrMessageAuthor(\"\")\n        }\n      })\n    }\n  })\n\n  const animate = (startTime) => {\n    if (!timeWhenLastUpdate) setTimeWhenLastUpdate(startTime);\n    setTimeSinceLastUpdate(startTime - timeWhenLastUpdate);\n    if (timeSinceLastUpdate > 4000) {\n      console.log('happening');\n      setTimeWhenLastUpdate(startTime);\n      if (frameNum >= 2) {\n        setFrameNum(1);\n      } else {\n        setFrameNum(frameNum + 1);\n      }\n      if (frameNum === 1) {\n        setCurrFire(thefire1);\n      } else {\n        setCurrFire(thefire2);\n      }\n    }\n\n    requestAnimationFrame(animate);\n  }\n\n  // useEffect(() => {\n  //     requestRef.current = requestAnimationFrame(animate);\n  //     return () => cancelAnimationFrame(requestRef.current);\n  // }, []);\n\n  return (\n    <>\n      {inFire \n        ? <div className=\"App\"\n          style={{\n            backgroundImage: `url(${campfireBackground})`,\n            backgroundSize: 'cover',\n          }} tabIndex=\"0\" onKeyPress={handleTyping} >\n            <div className=\"text-body\">\n              <div className=\"campfire-welcome-title\">Welcome<span style={{fontSize: 30}}> </span>to<span style={{fontSize: 30}}> </span><span style={{ color: \"#F35B22\", fontFamily: \"'Space Mono', monospace\", fontSize: '60px' }}>The<span style={{fontSize: 25}}> </span>Campfire</span></div>\n              {currMessage ? <div className=\"campfire-message\"><span className=\"message-author\">{currMessageAuthor}</span>:<span style={{fontSize: 25}}> </span>{currMessage}</div> : <div className=\"campfire-message\"> </div>}\n              <img src={currFire} className=\"the-fire\" />\n              <footer className=\"footer\">A Liam Kronman + Jason Seo Production</footer>\n            </div>\n          </div>\n        : <div className=\"App\"\n          style={{\n            backgroundImage: `url(${campfireBackground})`,\n            backgroundSize: 'cover',\n          }}>\n            <div className=\"text-body\">\n              <div className=\"campfire-title\">The<span style={{fontSize: 25}}> </span>Campfire</div>\n              <div className=\"campfire-subtitle\">Type like you talk.</div>\n              <div className=\"input-container\">\n                <input className=\"campname-input\" type=\"text\" value={inputValue} placeholder=\"Enter a camp name...\" onChange={handleInputChange} onKeyDown={handleKeyDown} />\n                {showInstruct \n                  ? <div className=\"campfire-input-instruction\">Press enter to join the fire...</div> \n                  : null}\n              </div>\n              <footer className=\"footer\">A Liam Kronman + Jason Seo Production</footer>\n            </div>\n          </div>}\n    </>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}